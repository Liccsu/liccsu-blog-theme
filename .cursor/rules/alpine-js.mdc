---
globs: *.html,*.js,*.ts
---

# Alpine.js ä½¿ç”¨è§„åˆ™

## ç‰ˆæœ¬ä¿¡æ¯
- **Alpine.js**: v3.14.9+

## åŸºæœ¬åŸåˆ™
- **è½»é‡çº§äº¤äº’** - ä½¿ç”¨ Alpine.js ä¸ºé™æ€é¡µé¢æ·»åŠ ç®€å•çš„äº¤äº’åŠŸèƒ½
- **å£°æ˜å¼è¯­æ³•** - ç›´æ¥åœ¨ HTML ä¸­ç¼–å†™ JavaScript é€»è¾‘
- **ä¸ Tailwind CSS é…åˆ** - ç»“åˆ Tailwind CSS å®ç°ç°ä»£åŒ–çš„ç”¨æˆ·ç•Œé¢

## Alpine.js æ ¸å¿ƒæŒ‡ä»¤

### x-data - æ•°æ®åˆå§‹åŒ–
```html
<!-- åŸºæœ¬æ•°æ®ç»‘å®š -->
<div x-data="{ open: false }">
  <button @click="open = !open">åˆ‡æ¢</button>
  <div x-show="open">å†…å®¹</div>
</div>

<!-- å¤æ‚æ•°æ®ç»“æ„ -->
<div x-data="{ 
  user: { name: '', email: '' },
  items: [],
  loading: false 
}">
  <!-- ç»„ä»¶å†…å®¹ -->
</div>
```

### x-show / x-if - æ¡ä»¶æ˜¾ç¤º
```html
<!-- ä½¿ç”¨ x-showï¼ˆä¿ç•™ DOM å…ƒç´ ï¼‰ -->
<div x-data="{ visible: true }">
  <p x-show="visible">è¿™æ®µæ–‡å­—å¯ä»¥æ˜¾ç¤º/éšè—</p>
</div>

<!-- ä½¿ç”¨ x-ifï¼ˆç§»é™¤ DOM å…ƒç´ ï¼‰ -->
<template x-if="condition">
  <div>æ¡ä»¶ä¸ºçœŸæ—¶æ˜¾ç¤º</div>
</template>
```

### x-for - åˆ—è¡¨æ¸²æŸ“
```html
<div x-data="{ items: ['è‹¹æœ', 'é¦™è•‰', 'æ©™å­'] }">
  <ul>
    <template x-for="item in items" :key="item">
      <li x-text="item"></li>
    </template>
  </ul>
</div>
```

### x-model - åŒå‘æ•°æ®ç»‘å®š
```html
<div x-data="{ message: '' }">
  <input type="text" x-model="message" class="input input-bordered">
  <p x-text="message"></p>
</div>
```

### @click - äº‹ä»¶å¤„ç†
```html
<div x-data="{ count: 0 }">
  <button @click="count++" class="btn btn-primary">
    ç‚¹å‡»æ¬¡æ•°: <span x-text="count"></span>
  </button>
</div>
```

## å¸¸è§ä½¿ç”¨æ¨¡å¼

### ä¸»é¢˜åˆ‡æ¢å™¨
```html
<div x-data="{ 
  isDark: localStorage.getItem('theme') === 'dark' || false 
}" 
x-init="document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light')">
  <button @click="
    isDark = !isDark;
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
    document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light')
  " class="btn btn-ghost">
    <span x-text="isDark ? 'ğŸŒ™ æ·±è‰²æ¨¡å¼' : 'â˜€ï¸ æµ…è‰²æ¨¡å¼'"></span>
  </button>
</div>
```

### ç§»åŠ¨ç«¯èœå•
```html
<div x-data="{ mobileMenuOpen: false }">
  <!-- èœå•æŒ‰é’® -->
  <button @click="mobileMenuOpen = !mobileMenuOpen" class="btn btn-ghost lg:hidden">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
    </svg>
  </button>
  
  <!-- ç§»åŠ¨ç«¯èœå• -->
  <div x-show="mobileMenuOpen" 
       x-transition:enter="transition ease-out duration-200"
       x-transition:enter-start="opacity-0 transform scale-95"
       x-transition:enter-end="opacity-100 transform scale-100"
       x-transition:leave="transition ease-in duration-75"
       x-transition:leave-start="opacity-100 transform scale-100"
       x-transition:leave-end="opacity-0 transform scale-95"
       class="absolute top-16 left-0 right-0 bg-base-100 shadow-lg lg:hidden">
    <!-- èœå•é¡¹ -->
  </div>
</div>
```

### æ¨¡æ€æ¡†
```html
<div x-data="{ modalOpen: false }">
  <button @click="modalOpen = true" class="btn btn-primary">æ‰“å¼€æ¨¡æ€æ¡†</button>
  
  <div x-show="modalOpen" 
       x-cloak
       class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
    <div @click.away="modalOpen = false" 
         class="modal-box">
      <h3 class="text-lg font-bold">æ¨¡æ€æ¡†æ ‡é¢˜</h3>
      <p class="py-4">æ¨¡æ€æ¡†å†…å®¹</p>
      <div class="modal-action">
        <button @click="modalOpen = false" class="btn">å…³é—­</button>
      </div>
    </div>
  </div>
</div>
```

### è¡¨å•éªŒè¯
```html
<div x-data="{ 
  form: { email: '', password: '' },
  errors: {},
  validateForm() {
    this.errors = {};
    if (!this.form.email) this.errors.email = 'é‚®ç®±ä¸èƒ½ä¸ºç©º';
    if (!this.form.password) this.errors.password = 'å¯†ç ä¸èƒ½ä¸ºç©º';
    return Object.keys(this.errors).length === 0;
  }
}">
  <form @submit.prevent="validateForm() && submitForm()">
    <div class="form-control">
      <label class="label">
        <span class="label-text">é‚®ç®±</span>
      </label>
      <input type="email" 
             x-model="form.email" 
             class="input input-bordered"
             :class="{ 'input-error': errors.email }">
      <label class="label" x-show="errors.email">
        <span class="label-text-alt text-error" x-text="errors.email"></span>
      </label>
    </div>
    
    <div class="form-control">
      <label class="label">
        <span class="label-text">å¯†ç </span>
      </label>
      <input type="password" 
             x-model="form.password" 
             class="input input-bordered"
             :class="{ 'input-error': errors.password }">
      <label class="label" x-show="errors.password">
        <span class="label-text-alt text-error" x-text="errors.password"></span>
      </label>
    </div>
    
    <button type="submit" class="btn btn-primary">æäº¤</button>
  </form>
</div>
```

### æœç´¢åŠŸèƒ½
```html
<div x-data="{ 
  query: '',
  items: ['æ–‡ç« 1', 'æ–‡ç« 2', 'æ–‡ç« 3'],
  get filteredItems() {
    return this.items.filter(item => 
      item.toLowerCase().includes(this.query.toLowerCase())
    );
  }
}">
  <input type="text" 
         x-model="query" 
         placeholder="æœç´¢æ–‡ç« ..."
         class="input input-bordered w-full">
  
  <div class="mt-4">
    <template x-for="item in filteredItems" :key="item">
      <div class="p-2 border-b" x-text="item"></div>
    </template>
    <div x-show="filteredItems.length === 0" class="p-4 text-center text-gray-500">
      æ²¡æœ‰æ‰¾åˆ°ç›¸å…³å†…å®¹
    </div>
  </div>
</div>
```

## ç»„ä»¶ç»„ç»‡

### æå–ä¸ºç‹¬ç«‹ç»„ä»¶
```html
<!-- å°†å¤æ‚çš„ Alpine.js é€»è¾‘æå–åˆ°ç‹¬ç«‹çš„ .js æ–‡ä»¶ä¸­ -->
<div x-data="themeToggle()">
  <button @click="toggle()" class="btn btn-ghost">
    <span x-text="label"></span>
  </button>
</div>

<script>
function themeToggle() {
  return {
    isDark: localStorage.getItem('theme') === 'dark' || false,
    get label() {
      return this.isDark ? 'ğŸŒ™ æ·±è‰²æ¨¡å¼' : 'â˜€ï¸ æµ…è‰²æ¨¡å¼';
    },
    toggle() {
      this.isDark = !this.isDark;
      localStorage.setItem('theme', this.isDark ? 'dark' : 'light');
      document.documentElement.setAttribute('data-theme', this.isDark ? 'dark' : 'light');
    }
  };
}
</script>
```

## æœ€ä½³å®è·µ

1. **ä½¿ç”¨ x-cloak** - é˜²æ­¢æœªç¼–è¯‘çš„æ¨¡æ¿é—ªçƒ
2. **åˆç†ä½¿ç”¨ x-show vs x-if** - é¢‘ç¹åˆ‡æ¢ç”¨ x-showï¼Œä¸€æ¬¡æ€§æ˜¾ç¤ºç”¨ x-if
3. **äº‹ä»¶ä¿®é¥°ç¬¦** - ä½¿ç”¨ @click.awayã€@keydown.escape ç­‰
4. **è¿‡æ¸¡åŠ¨ç”»** - ä½¿ç”¨ x-transition æ·»åŠ å¹³æ»‘è¿‡æ¸¡
5. **æ•°æ®å“åº”å¼** - åˆ©ç”¨ getter åˆ›å»ºè®¡ç®—å±æ€§
