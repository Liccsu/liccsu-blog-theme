document.querySelectorAll(".toggle-password-button").forEach(function(t){t.addEventListener("click",function(){const t=this.closest(".toggle-password-display-flag"),e=t.querySelector("input"),n="true"===t.dataset.show;t.dataset.show=n?"false":"true",e.type=n?"password":"text"})}),window.setupPasswordConfirmation=function(t,e){const n=document.getElementById(t),o=document.getElementById(e);function s(){const t=n.value!==o.value?window.i18nResources?.passwordConfirmationFailed||"密码不一致":"";o.setCustomValidity(t)}n&&o&&(n.addEventListener("input",s),o.addEventListener("input",s))},window.sendVerificationCode=function(t,e){let n=60;const o=t.textContent;t.addEventListener("click",async function(){if(!t.disabled){t.disabled=!0,t.textContent="发送中...";try{await e();const s=setInterval(function(){n--,t.textContent=n+"s",n<=0&&(clearInterval(s),t.textContent=o,t.disabled=!1,n=60)},1e3)}catch(s){t.textContent=o,t.disabled=!1,alert(s.message||"发送失败")}}})};
