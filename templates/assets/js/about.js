import{a as t}from"../assets/article-content-jPVWAvBo.js";!function(e,n){const o={};function a(t,e){if(!t)return e;const o=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(o)return[o[1],o[2],o[3]].map(function(t){return parseInt(t).toString(16).padStart(2,"0")}).join("");try{var a=n.createElement("canvas");a.width=a.height=1;var r=a.getContext("2d");r.fillStyle=t,r.fillRect(0,0,1,1);var i=r.getImageData(0,0,1,1).data;return[i[0],i[1],i[2]].map(function(t){return t.toString(16).padStart(2,"0")}).join("")}catch(s){return console.log("[GitHub] colorToHex error:",s),e}}o.initScrollReveal=function(){const t=n.querySelectorAll("[data-reveal]");if(!t.length)return;const e=new IntersectionObserver(function(t){t.forEach(function(t){t.isIntersecting&&t.target.classList.add("revealed")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});t.forEach(function(t){e.observe(t)})},o.initStatCounter=function(){const t=n.querySelectorAll("[data-stat-value]");if(!t.length)return;const e=new IntersectionObserver(function(t){t.forEach(function(t){t.isIntersecting&&!t.target.classList.contains("counted")&&(t.target.classList.add("counted"),o.animateNumber(t.target))})},{threshold:.3,rootMargin:"0px 0px -20px 0px"});t.forEach(function(t){e.observe(t)})},o.easeOutQuart=function(t){return 1-Math.pow(1-t,4)},o.animateNumber=function(t){const e=parseInt(t.getAttribute("data-target"))||0,n=t.querySelector(".sf-stat-number");if(!n)return;const a=performance.now();function r(t){return t>=1e4?t.toLocaleString("zh-CN"):t.toString()}requestAnimationFrame(function t(i){const s=i-a,l=Math.min(s/1800,1),c=o.easeOutQuart(l),u=Math.floor(c*e);n.textContent=r(u),l<1?requestAnimationFrame(t):n.textContent=r(e)})},o.initArticleHeatmap=function(){const t=n.getElementById("article-heatmap-container");if(!t||!e.aboutPagePosts)return;const o=e.aboutPagePosts.filter(function(t){return t.title&&t.date});if(!o.length)return;const a=t.querySelector(".heatmap-canvas"),r=n.getElementById("article-count");r&&(r.textContent=o.length);const i={};o.forEach(function(t){const e=new Date(t.date),n=e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0");i[n]||(i[n]=[]),i[n].push(t)});const s=new Date,l=new Date(s);l.setDate(l.getDate()-364);const c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],u=[];let g=-1;for(let e=0;e<53;e++){const t=new Date(l);t.setDate(t.getDate()+7*e);const n=t.getMonth();n!==g&&(u.push('<text x="'+(25+14*e)+'" y="10" class="heatmap-month-label">'+c[n]+"</text>"),g=n)}const h=["","Mon","","Wed","","Fri",""],m=[1,3,5].map(function(t){return'<text x="0" y="'+(15+14*t+8.25)+'" class="heatmap-label">'+h[t]+"</text>"}),d=[],p=Math.max.apply(null,Object.values(i).map(function(t){return t.length}).concat([1]));for(let e=0;e<371;e++){const t=Math.floor(e/7),n=e%7,o=new Date(l);if(o.setDate(o.getDate()+7*t+n),o>s)continue;const a=o.getFullYear()+"-"+String(o.getMonth()+1).padStart(2,"0")+"-"+String(o.getDate()).padStart(2,"0"),r=i[a]?i[a].length:0,c=0===r?0:Math.ceil(r/p*3);let u;u=0===c?"color-mix(in oklch, var(--color-base-content) 15%, var(--color-base-100))":1===c?"color-mix(in oklch, var(--color-primary) 40%, var(--color-base-100))":2===c?"color-mix(in oklch, var(--color-primary) 70%, var(--color-base-100))":"var(--color-primary)",d.push('<rect x="'+(25+14*t)+'" y="'+(15+14*n)+'" width="'+'11" height="'+'11" rx="2" fill="'+u+'" class="article-heatmap-cell heatmap-cell-animated" style="animation-delay:'+e+'ms" data-date="'+a+'" data-count="'+r+'"></rect>')}a.innerHTML='<svg class="article-heatmap-svg" viewBox="0 0 770 116"><g>'+u.join("")+"</g><g>"+m.join("")+"</g><g>"+d.join("")+"</g></svg>";const f=n.getElementById("article-tooltip");a.querySelectorAll(".article-heatmap-cell").forEach(function(t){t.addEventListener("mouseenter",function(n){if(!f)return;const a=t.getAttribute("data-date"),r=t.getAttribute("data-count"),i=new Date(a),s=i.getFullYear()+"/"+(i.getMonth()+1)+"/"+i.getDate(),l=o.filter(function(t){return new Date(t.date).toDateString()===i.toDateString()});let c='<div class="heatmap-tooltip-date">'+s+'</div><div class="heatmap-tooltip-count">'+r+" 篇文章</div>";l.length>0&&(c+='<div class="heatmap-tooltip-posts">',l.slice(0,3).forEach(function(t){c+='<span class="heatmap-tooltip-post">'+t.title+"</span>"}),l.length>3&&(c+='<span class="heatmap-tooltip-post">+'+(l.length-3)+" 更多...</span>"),c+="</div>"),f.innerHTML=c,f.style.display="block";var u=f.offsetWidth||200,g=f.offsetHeight||100,h=e.innerWidth,m=e.innerHeight,d=e.scrollX||e.pageXOffset,p=e.scrollY||e.pageYOffset,b=n.pageX+10,y=n.pageY+10;b+u>d+h-20&&(b=n.pageX-u-10),y+g>p+m-20&&(y=n.pageY-g-10),b<d+10&&(b=d+10),f.style.left=b+"px",f.style.top=y+"px"}),t.addEventListener("mouseleave",function(){f&&(f.style.display="none")})})},o.updateGitHubColors=function(){const t=e.aboutGithubConfig;if(!t||!t.username)return;var o=t.theme?String(t.theme).trim():"";if(o&&"null"!==o&&"undefined"!==o)return;const r=n.getElementById("about-color-probe");let i="1f2937",s="6b7280";r&&(i=a(getComputedStyle(r).backgroundColor,i),s=a(getComputedStyle(r).color,s));var l=t.locale?String(t.locale).trim():"",c=l&&"null"!==l&&"undefined"!==l?"&locale="+l:"";const u=n.querySelector(".github-heatmap-img");u&&(u.src="https://ghchart.rshah.org/"+i+"/"+t.username);const g=n.getElementById("github-stats-img");g&&(g.src=t.statsHost+"/api?username="+t.username+"&show_icons=true&hide_border=true"+c+"&theme=transparent&title_color="+i+"&icon_color="+i+"&text_color="+s+"&bg_color=00000000");const h=n.getElementById("github-langs-img");h&&(h.src=t.statsHost+"/api/top-langs/?username="+t.username+"&layout=compact&hide_border=true"+c+"&theme=transparent&title_color="+i+"&text_color="+s+"&bg_color=00000000")},o.initGitHub=function(){const t=n.getElementById("github-heatmap-container"),r=e.aboutGithubConfig;if(!r||!r.username)return;const i=n.getElementById("about-color-probe");let s="1f2937",l="6b7280";if(i&&(s=a(getComputedStyle(i).backgroundColor,s),l=a(getComputedStyle(i).color,l)),t){const e=t.querySelector(".github-heatmap-img"),n=t.querySelector(".sf-loading");e&&(e.onload=function(){e.style.display="block",n&&(n.style.display="none")},e.onerror=function(){n&&(n.innerHTML='<span style="opacity:0.6;">加载失败</span>')},e.src="https://ghchart.rshah.org/"+s+"/"+r.username)}var c=r.locale?String(r.locale).trim():"",u=c&&"null"!==c&&"undefined"!==c?"&locale="+c:"",g=r.theme?String(r.theme).trim():"",h=g&&"null"!==g&&"undefined"!==g;const m=n.getElementById("github-stats-img"),d=n.getElementById("github-langs-img");if(m){var p=r.statsHost+"/api?username="+r.username+"&show_icons=true&hide_border=true"+u;p+=h?"&theme="+g:"&theme=transparent&title_color="+s+"&icon_color="+s+"&text_color="+l+"&bg_color=00000000",m.src=p}if(d){var f=r.statsHost+"/api/top-langs/?username="+r.username+"&layout=compact&hide_border=true"+u;f+=h?"&theme="+g:"&theme=transparent&title_color="+s+"&text_color="+l+"&bg_color=00000000",d.src=f}new MutationObserver(function(t){t.forEach(function(t){"data-theme"!==t.attributeName&&"data-color-scheme"!==t.attributeName||requestAnimationFrame(function(){o.updateGitHubColors()})})}).observe(n.documentElement,{attributes:!0,attributeFilter:["data-theme","data-color-scheme"]})},o.initLocation=function(){const t=n.getElementById("location-map");if(!t)return;const e=parseFloat(t.getAttribute("data-lat")),o=parseFloat(t.getAttribute("data-lng")),a=t.getAttribute("data-name")||"位置";if(isNaN(e)||isNaN(o))return void(t.innerHTML='<div style="display:flex;align-items:center;justify-content:center;height:100%;opacity:0.5;">请配置位置坐标</div>');const r="https://apis.map.qq.com/ws/staticmap/v2/?center="+e+","+o+"&zoom=13&size="+Math.min(800,t.offsetWidth||800)+"*320&markers=color:red|label:A|"+e+","+o+"&key=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77",i="https://uri.amap.com/marker?position="+o+","+e+"&name="+encodeURIComponent(a)+"&coordinate=gaode&callnative=1";t.innerHTML='<a href="'+i+'" target="_blank" rel="noopener" style="display:block;position:relative;width:100%;height:100%;min-height:320px;border-radius:0.75rem;overflow:hidden;cursor:pointer;transition:all 0.3s ease;"><img src="'+r+'" alt="地图位置" style="width:100%;height:100%;object-fit:cover;" loading="lazy" /><div style="position:absolute;bottom:1rem;right:1rem;display:inline-flex;align-items:center;gap:0.5rem;padding:0.5rem 1rem;background:var(--color-base-content);color:var(--color-base-100);border-radius:2rem;font-size:0.875rem;font-weight:600;box-shadow:0 4px 12px rgba(0,0,0,0.25);"><svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>在地图中查看</div></a>'},o.initToolkitProgress=function(){const t=n.querySelectorAll(".sf-tool-progress");if(!t.length)return;const e=new IntersectionObserver(function(t){t.forEach(function(t){if(t.isIntersecting&&!t.target.classList.contains("animated")){t.target.classList.add("animated");const e=t.target.style.width;t.target.style.width="0",setTimeout(function(){t.target.style.width=e},100)}})},{threshold:.5});t.forEach(function(t){e.observe(t)})},o.initSmoothScroll=function(){n.querySelectorAll('a[href^="#"]').forEach(function(t){t.addEventListener("click",function(t){const e=this.getAttribute("href");if("#"===e)return;const o=n.querySelector(e);o&&(t.preventDefault(),o.scrollIntoView({behavior:"smooth",block:"start"}))})})},n.addEventListener("DOMContentLoaded",function(){o.initScrollReveal(),o.initStatCounter(),o.initArticleHeatmap(),o.initGitHub(),o.initToolkitProgress(),o.initSmoothScroll(),setTimeout(o.initLocation,500),t()})}(window,document);
