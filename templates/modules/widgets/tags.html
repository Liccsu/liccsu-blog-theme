<!doctype html>
<html xmlns:th="https://www.thymeleaf.org">
  <!-- ========================================== -->
  <!--     标签云组件 - Premium Refined Style    -->
  <!-- ========================================== -->

  <div
    th:fragment="cloud"
    class="card bg-base-100/80 border-base-content/5 rounded-[1.5rem] border p-5 shadow-lg backdrop-blur-xl"
    th:with="tags = ${tagFinder.list(1,20)}"
  >
    <!-- 标题栏 -->
    <div class="mb-5 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div
          class="from-warning/20 to-warning/10 flex h-9 w-9 items-center justify-center rounded-xl bg-gradient-to-br"
        >
          <span class="icon-[heroicons--tag] text-warning h-5 w-5"></span>
        </div>
        <div>
          <span class="text-base-content font-bold">标签云</span>
          <p class="text-base-content/40 mt-0.5 text-xs font-medium">Trending Tags</p>
        </div>
      </div>
      <span class="text-base-content/30 bg-base-200/50 rounded-full px-2 py-0.5 text-xs" th:text="|${tags.total}|"
        >0</span
      >
    </div>

    <!-- 标签网格 - 精致药丸 -->
    <div class="flex flex-wrap gap-2">
      <a
        th:each="tag, iterStat : ${tags.items}"
        th:if="${iterStat.index < 15}"
        th:href="@{${tag.status.permalink}}"
        th:with="tagIcon = ${tag.metadata.annotations?.get('icon')}"
        class="bg-base-200/50 text-base-content/60 hover:bg-primary/10 hover:text-primary hover:border-primary/20 group inline-flex cursor-pointer items-center gap-1.5 rounded-full border border-transparent px-3 py-1.5 text-xs font-medium transition-all"
      >
        <!-- 自定义图标或默认 # -->
        <th:block th:if="${tagIcon != null and !tagIcon.isEmpty()}">
          <span
            th:utext="${tagIcon}"
            class="text-base-content/40 group-hover:text-primary/70 h-3 w-3 [&>svg]:h-3 [&>svg]:w-3"
          ></span>
        </th:block>
        <th:block th:if="${tagIcon == null or tagIcon.isEmpty()}">
          <span class="text-base-content/30 group-hover:text-primary/60">#</span>
        </th:block>
        <span th:text="${tag.spec.displayName}">标签</span>
        <span
          class="text-base-content/30 group-hover:text-primary/50 text-[10px]"
          th:text="${tag.status.postCount ?: 0}"
          >0</span
        >
      </a>
    </div>

    <!-- 查看更多 -->
    <a
      href="/tags"
      th:if="${tags.total > 15}"
      class="border-base-content/5 text-base-content/40 hover:text-primary mt-4 flex cursor-pointer items-center justify-center gap-1 border-t pt-4 text-xs transition-colors"
    >
      查看全部标签
      <span class="icon-[heroicons--arrow-right] h-3 w-3"></span>
    </a>
  </div>
</html>
