<!doctype html>
<html xmlns:th="https://www.thymeleaf.org">
  <!-- ============================================= -->
  <!--   极简风格：精致优雅的阅读体验                -->
  <!--   设计理念：克制、呼吸、层次、细节            -->
  <!-- ============================================= -->

  <section th:fragment="minimal(posts, settings)" class="mx-auto max-w-2xl px-4 sm:px-6">
    <article
      th:each="post, iterStat : ${posts.items}"
      th:with="isPinned = ${post.spec.pinned == true},
                    isPrivate = ${post.spec.visible != null and post.spec.visible.name() == 'PRIVATE' and currentUser != null and currentUser.metadata.name == post.spec.owner},
                    isLocked = ${post.metadata.annotations != null and post.metadata.annotations['content.halo.run/content-restriction'] != null and post.metadata.annotations['content.halo.run/content-restriction'] != ''}"
      class="group relative py-12 sm:py-16"
    >
      <!-- 文章序号：优雅的视觉引导 -->
      <div class="absolute top-12 left-0 -ml-12 hidden sm:top-16 lg:block">
        <span
          class="text-base-content/10 group-hover:text-primary/20 text-6xl font-extralight transition-all duration-500"
          th:text="${iterStat.index < 9 ? '0' + (iterStat.index + 1) : (iterStat.index + 1)}"
          >01</span
        >
      </div>

      <!-- 上方元信息：时间、分类、角标 -->
      <div class="text-base-content/40 mb-5 flex flex-wrap items-center gap-3 text-xs tracking-wider uppercase">
        <time th:text="${#dates.format(post.spec.publishTime,'yyyy-MM-dd')}">2025-01-24</time>
        <span class="bg-base-content/20 h-1 w-1 rounded-full"></span>
        <span
          th:if="${!#lists.isEmpty(post.categories)}"
          th:with="firstCat=${post.categories[0]}"
          class="hover:text-primary transition-colors"
        >
          <a th:href="@{${firstCat.status.permalink}}" th:text="${firstCat.spec.displayName}">Category</a>
        </span>
        <!-- 置顶角标 -->
        <span
          th:if="${isPinned}"
          class="text-primary/80 bg-primary/10 rounded px-2 py-0.5 text-[10px] font-medium tracking-normal normal-case"
          >置顶</span
        >
      </div>

      <!-- 标题：优雅的字体编排 -->
      <h2
        class="group-hover:text-primary mb-6 text-3xl leading-tight font-light tracking-tight transition-colors duration-300 sm:text-4xl lg:text-5xl"
      >
        <a th:href="@{${post.status.permalink}}" th:text="${post.spec.title}">文章标题</a>
      </h2>

      <!-- 摘要：舒适的阅读体验 -->
      <p
        th:with="excerptText = ${(post.spec.excerpt != null and post.spec.excerpt.raw != null and !post.spec.excerpt.raw.isEmpty()) ? post.spec.excerpt.raw : (post.status.excerpt ?: '')}"
        th:if="${excerptText != null and !excerptText.isEmpty()}"
        class="text-base-content/60 mb-8 text-lg leading-relaxed font-light sm:text-xl"
        style="line-height: 1.8"
      >
        <a th:href="@{${post.status.permalink}}" class="hover:text-base-content" th:text="${excerptText}"></a>
      </p>

      <!-- 底部信息栏 -->
      <div class="border-base-content/5 flex items-center justify-between border-t pt-8">
        <!-- 标签 -->
        <div th:if="${!#lists.isEmpty(post.tags)}" class="flex flex-wrap gap-2">
          <a
            th:each="tag, tagStat : ${post.tags}"
            th:if="${tagStat.index < 3}"
            th:href="@{${tag.status.permalink}}"
            class="text-base-content/40 hover:text-primary border-base-content/10 hover:border-primary/30 inline-block rounded-full border px-2.5 py-1 text-xs transition-colors"
            th:text="${tag.spec.displayName}"
            >标签</a
          >
          <span
            th:if="${post.tags.size() > 3}"
            class="text-base-content/30 inline-block px-2.5 py-1 text-xs"
            th:text="'+ ' + ${post.tags.size() - 3}"
            >+2</span
          >
        </div>

        <!-- 阅读指示 -->
        <div class="text-base-content/40 flex items-center gap-4 text-xs">
          <span th:if="${(post.stats.visit ?: 0) > 0}" class="inline-flex items-center gap-1.5">
            <span class="icon-[heroicons--eye] h-4 w-4"></span>
            <span th:text="${post.stats.visit}">0</span>
          </span>
          <a
            th:href="@{${post.status.permalink}}"
            class="hover:text-primary inline-flex items-center gap-2 transition-colors"
          >
            <span>阅读更多</span>
            <span class="icon-[heroicons--arrow-right] h-4 w-4 transition-transform group-hover:translate-x-1"></span>
          </a>
        </div>
      </div>

      <!-- 分隔线：微妙优雅 -->
      <div
        th:unless="${iterStat.last}"
        class="via-base-content/15 absolute right-0 bottom-0 left-0 h-px bg-gradient-to-r from-transparent to-transparent"
      ></div>
    </article>

    <!-- 底部留白 -->
    <div class="h-16"></div>
  </section>
</html>
